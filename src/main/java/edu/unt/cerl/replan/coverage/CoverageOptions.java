/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * CoverageOptions.java
 *
 * Created on Oct 22, 2012, 2:29:30 PM
 */
package edu.unt.cerl.replan.coverage;

import edu.unt.cerl.replan.REPLAN;
import edu.unt.cerl.replan.controller.action.ProgressBar;
import edu.unt.cerl.replan.view.windows.ProgressWindow;
import javax.swing.ButtonGroup;

/**
 *
 * @author rag0122
 */
public class CoverageOptions extends javax.swing.JDialog {

    boolean done = false;
    int blockOption = 0;
    int distanceOption = 0;
    int priorityOption = 0;
    int coverageOptions[] = null;
//    ScenarioState state;
//    ScenarioPanel currentScenario;
//    Replan task;

    /** Creates new form CoverageOptions */
    public CoverageOptions(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        
        // Create button groups for radio button sections
            // Distance type
        ButtonGroup distanceButtons = new ButtonGroup();
        distanceButtons.add(closestPointRadioButton);
        distanceButtons.add(centroidRadioButton);
            // Priority type
        ButtonGroup priorityButtons = new ButtonGroup();
        priorityButtons.add(distanceOverPopulationRadioButton);
        priorityButtons.add(distanceRadioButton);
        priorityButtons.add(populationRadioButton);
            // Block type
        ButtonGroup blockButtons = new ButtonGroup();
        blockButtons.add(censusBlocksRadioButton);
        blockButtons.add(hexagonalTilesRadioButton);
        blockButtons.add(squareTilesRadioButton);
       
        
        this.addWindowListener(new java.awt.event.WindowAdapter() {

            public void windowClosing(java.awt.event.WindowEvent e) {
                CoverageOptions.this.setVisible(false);
            }
        });
    }

//    public CoverageOptions(java.awt.Frame parent, boolean modal, ScenarioState state, ScenarioPanel currentScenario, Replan task) {
//        super(parent, modal);
//        this.state = state;
//        this.currentScenario = currentScenario;
//        this.task = task;
//        initComponents();
//        this.addWindowListener(new java.awt.event.WindowAdapter() {
//
//            public void windowClosing(java.awt.event.WindowEvent e) {
//                CoverageOptions.this.setVisible(false);
//            }
//        });
//    }
    public int returnBlockOption() {
        return blockOption;
    }

    public int[] returnCoverageOptions() {
        coverageOptions = new int[4];

        coverageOptions[0] = distanceOption;
        coverageOptions[1] = priorityOption;
        coverageOptions[2] = blockOption;
        coverageOptions[3] = 0;

        return coverageOptions;
    }

    public int[] returnPartitioningOptions() {
        coverageOptions = new int[4];

        coverageOptions[0] = distanceOption;
        coverageOptions[1] = priorityOption;
        coverageOptions[2] = blockOption;
        coverageOptions[3] = 1;

        return coverageOptions;
    }

    public int returnDistanceOption() {
        return distanceOption;
    }

    public int returnPriorityOption() {
        return priorityOption;
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        calculateDistanceFromPanel = new javax.swing.JPanel();
        centroidRadioButton = new javax.swing.JRadioButton();
        closestPointRadioButton = new javax.swing.JRadioButton();
        priorityStylePanel = new javax.swing.JPanel();
        distanceRadioButton = new javax.swing.JRadioButton();
        distanceOverPopulationRadioButton = new javax.swing.JRadioButton();
        populationRadioButton = new javax.swing.JRadioButton();
        coverageOptionsDoneButton = new javax.swing.JButton();
        blockTypePanel = new javax.swing.JPanel();
        censusBlocksRadioButton = new javax.swing.JRadioButton();
        hexagonalTilesRadioButton = new javax.swing.JRadioButton();
        squareTilesRadioButton = new javax.swing.JRadioButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        calculateDistanceFromPanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Distance Type"));
        calculateDistanceFromPanel.setName(""); // NOI18N

        centroidRadioButton.setSelected(true);
        centroidRadioButton.setText("Block Centroid");
        centroidRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                centroidRadioButtonActionPerformed(evt);
            }
        });

        closestPointRadioButton.setText("Closest Point of Block");
        closestPointRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closestPointRadioButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout calculateDistanceFromPanelLayout = new javax.swing.GroupLayout(calculateDistanceFromPanel);
        calculateDistanceFromPanel.setLayout(calculateDistanceFromPanelLayout);
        calculateDistanceFromPanelLayout.setHorizontalGroup(
            calculateDistanceFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(calculateDistanceFromPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(calculateDistanceFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(closestPointRadioButton)
                    .addComponent(centroidRadioButton))
                .addContainerGap(38, Short.MAX_VALUE))
        );
        calculateDistanceFromPanelLayout.setVerticalGroup(
            calculateDistanceFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, calculateDistanceFromPanelLayout.createSequentialGroup()
                .addComponent(centroidRadioButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(closestPointRadioButton))
        );

        priorityStylePanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Priority Type"));

        distanceRadioButton.setSelected(true);
        distanceRadioButton.setText("Distance Only");
        distanceRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                distanceRadioButtonActionPerformed(evt);
            }
        });

        distanceOverPopulationRadioButton.setText("Distance / Population");
        distanceOverPopulationRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                distanceOverPopulationRadioButtonActionPerformed(evt);
            }
        });

        populationRadioButton.setText("Population Only");
        populationRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                populationRadioButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout priorityStylePanelLayout = new javax.swing.GroupLayout(priorityStylePanel);
        priorityStylePanel.setLayout(priorityStylePanelLayout);
        priorityStylePanelLayout.setHorizontalGroup(
            priorityStylePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(priorityStylePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(priorityStylePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(populationRadioButton)
                    .addComponent(distanceRadioButton)
                    .addComponent(distanceOverPopulationRadioButton))
                .addContainerGap(41, Short.MAX_VALUE))
        );
        priorityStylePanelLayout.setVerticalGroup(
            priorityStylePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(priorityStylePanelLayout.createSequentialGroup()
                .addComponent(distanceRadioButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(populationRadioButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(distanceOverPopulationRadioButton))
        );

        coverageOptionsDoneButton.setText("Done");
        coverageOptionsDoneButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                coverageOptionsDoneButtonActionPerformed(evt);
            }
        });

        blockTypePanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Block Type"));

        censusBlocksRadioButton.setSelected(true);
        censusBlocksRadioButton.setText("Census Blocks");
        censusBlocksRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                censusBlocksRadioButtonActionPerformed(evt);
            }
        });

        hexagonalTilesRadioButton.setText("Hexagonal Tiles");
        hexagonalTilesRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                hexagonalTilesRadioButtonActionPerformed(evt);
            }
        });

        squareTilesRadioButton.setText("Square Tiles");
        squareTilesRadioButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                squareTilesRadioButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout blockTypePanelLayout = new javax.swing.GroupLayout(blockTypePanel);
        blockTypePanel.setLayout(blockTypePanelLayout);
        blockTypePanelLayout.setHorizontalGroup(
            blockTypePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(blockTypePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(blockTypePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(censusBlocksRadioButton)
                    .addComponent(squareTilesRadioButton)
                    .addComponent(hexagonalTilesRadioButton))
                .addContainerGap(79, Short.MAX_VALUE))
        );
        blockTypePanelLayout.setVerticalGroup(
            blockTypePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(blockTypePanelLayout.createSequentialGroup()
                .addComponent(censusBlocksRadioButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(squareTilesRadioButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(hexagonalTilesRadioButton))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(60, 60, 60)
                .addComponent(coverageOptionsDoneButton))
            .addComponent(priorityStylePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(calculateDistanceFromPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(blockTypePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(calculateDistanceFromPanel, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(priorityStylePanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(blockTypePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(coverageOptionsDoneButton)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void centroidRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_centroidRadioButtonActionPerformed
        // TODO add your handling code here:
        distanceOption = 0;
}//GEN-LAST:event_centroidRadioButtonActionPerformed

    private void closestPointRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closestPointRadioButtonActionPerformed
        // TODO add your handling code here:
        distanceOption = 1;
}//GEN-LAST:event_closestPointRadioButtonActionPerformed

    private void distanceRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_distanceRadioButtonActionPerformed
        // TODO add your handling code here:
        priorityOption = 0;
}//GEN-LAST:event_distanceRadioButtonActionPerformed

    private void distanceOverPopulationRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_distanceOverPopulationRadioButtonActionPerformed
        // TODO add your handling code here:
        priorityOption = 1;
}//GEN-LAST:event_distanceOverPopulationRadioButtonActionPerformed

    private void censusBlocksRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_censusBlocksRadioButtonActionPerformed
        // TODO add your handling code here:
        blockOption = 0;
}//GEN-LAST:event_censusBlocksRadioButtonActionPerformed

    private void hexagonalTilesRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_hexagonalTilesRadioButtonActionPerformed
        // TODO add your handling code here:
        blockOption = 1;
}//GEN-LAST:event_hexagonalTilesRadioButtonActionPerformed

    private void coverageOptionsDoneButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_coverageOptionsDoneButtonActionPerformed
        // TODO add your handling code here:
        boolean done = true;
        this.setVisible(false);

        CoverageTask task = new CoverageTask(REPLAN.getMainFrame().getTabs().getSelectedScenario());
        ProgressBar pb = new ProgressBar();
        pb.setTask(task);
        task.addPropertyChangeListener(pb);
        task.execute();
        
        //new Coverage(state, currentScenario, task);
}//GEN-LAST:event_coverageOptionsDoneButtonActionPerformed

    private void populationRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_populationRadioButtonActionPerformed
        // TODO add your handling code here:
        priorityOption = -1;
    }//GEN-LAST:event_populationRadioButtonActionPerformed

    private void squareTilesRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_squareTilesRadioButtonActionPerformed
        // TODO add your handling code here:
        blockOption = -1;
    }//GEN-LAST:event_squareTilesRadioButtonActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
//                CoverageOptions dialog = new CoverageOptions(new javax.swing.JFrame(), true);
//                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
//
//                    public void windowClosing(java.awt.event.WindowEvent e) {
//                        System.exit(0);
//                    }
//                });
//                dialog.setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel blockTypePanel;
    private javax.swing.JPanel calculateDistanceFromPanel;
    private javax.swing.JRadioButton censusBlocksRadioButton;
    private javax.swing.JRadioButton centroidRadioButton;
    private javax.swing.JRadioButton closestPointRadioButton;
    private javax.swing.JButton coverageOptionsDoneButton;
    private javax.swing.JRadioButton distanceOverPopulationRadioButton;
    private javax.swing.JRadioButton distanceRadioButton;
    private javax.swing.JRadioButton hexagonalTilesRadioButton;
    private javax.swing.JRadioButton populationRadioButton;
    private javax.swing.JPanel priorityStylePanel;
    private javax.swing.JRadioButton squareTilesRadioButton;
    // End of variables declaration//GEN-END:variables
}
